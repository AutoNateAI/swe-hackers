<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Week 4: Problem Solver Portfolio | AI Problem Solving Academy</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../shared/css/lesson-interactive.css">
  <link rel="stylesheet" href="../../shared/css/activity-carousel.css">
</head>
<body data-course="endless-opportunities" data-lesson="week4-portfolio">
  <header class="header">
    <div class="header-content">
      <a href="../../index.html" class="logo">
        <div class="logo-icon">üèÜ</div>
        <span>Portfolio</span>
      </a>
      <nav class="nav-links">
        <a href="../index.html">‚Üê Endless Opportunities</a>
        <a href="../week3-building/">Week 3</a>
        <a href="index.html" class="active">Week 4</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="page-header">
      <div class="breadcrumb">
        <a href="../index.html">Endless Opportunities</a>
        <span>/</span>
        <span>Week 4: Problem Solver Portfolio</span>
      </div>
      <h1>üèÜ Problem Solver Portfolio</h1>
      <p>Combine everything you've learned to solve a real problem. This is your capstone‚Äîthe moment where questions, data, and building come together.</p>
    </div>

    <!-- Audio Info -->
    <section class="section audio-info-section">
      <div class="info-box compact">
        <div class="info-header">
          <span class="info-icon">üéôÔ∏è</span>
          <div>
            <h4>Interactive Learning Experience</h4>
            <p>Watch diagrams come alive with AI narration ‚Ä¢ Click dots to jump ‚Ä¢ Test your understanding with quizzes</p>
          </div>
        </div>
        <div class="voice-options">
          <span class="voice-badge">üë©‚Äçüé§ Female Storyteller</span>
          <span class="voice-badge">üé© Male UK Storyteller</span>
        </div>
      </div>
    </section>

    <!-- Story 1: The Problem-Solving Process -->
    <section class="section" id="problem-solving-process-section">
      <h2>The Problem-Solving Process</h2>
      <p>You've learned all the pieces. Now see how questions, data, insights, and building come together into a complete problem-solving framework.</p>
      
      <div class="diagram-container" id="problem-solving-process-container">
        <div class="diagram-header">
          <span class="diagram-title">üîÑ From Problem to Solution</span>
        </div>
        <div id="problem-solving-process-story" class="diagram-canvas storytelling"></div>
        
        <div class="diagram-story" id="problem-solving-process-story-caption">
          <div class="story-step">
            <div class="story-icon visible">üöÄ</div>
            <div class="story-content">
              <div class="story-title visible">Ready to Explore</div>
              <div class="story-text visible">Click any progress dot below to jump to that step, or press Play to watch the full story unfold.</div>
              <div class="story-connection" style="display: none;">
                <span class="arrow">‚Üí</span>
                <span class="connection-text"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="playback-controls">
          <div class="playback-left">
            <button class="diagram-btn play-btn" data-action="play">‚ñ∂ Play</button>
          </div>
          <div class="playback-center">
            <div class="story-progress" id="problem-solving-process-story-progress"></div>
          </div>
          <div class="playback-right">
            <button class="diagram-btn small" data-action="fit" title="Fit to view">Fit</button>
            <button class="diagram-btn small" data-action="reset" title="Reset view">Reset</button>
          </div>
        </div>

        <div class="settings-bar">
          <div class="control-group">
            <label>‚è±Ô∏è</label>
            <select id="problem-solving-process-speed-select">
              <option value="1000">1s</option>
              <option value="2000" selected>2s</option>
              <option value="5000">5s</option>
              <option value="10000">10s</option>
            </select>
          </div>
          <div class="control-group">
            <button class="audio-toggle" id="problem-solving-process-audio-toggle" title="Toggle audio narration">
              <span class="audio-icon">üîä</span>
            </button>
          </div>
          <div class="control-group">
            <label>üé§</label>
            <select id="problem-solving-process-voice-select" class="voice-select">
              <option value="">Loading...</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Activity Carousels for Story 1: Problem-Solving Process -->
      <div class="activity-carousels" data-story="problem-solving-process-story">
        <div id="story1-comprehension" class="carousel-container"></div>
        <div id="story1-application" class="carousel-container"></div>
        <div id="story1-synthesis" class="carousel-container"></div>
        <!-- Quiz carousel (knowledge check) after activities -->
        <div id="story1-quiz" class="carousel-container"></div>
      </div>
    </section>

    <!-- Story 2: Building Your Capstone -->
    <section class="section" id="capstone-journey-section">
      <h2>Building Your Capstone</h2>
      <p>Your capstone is a real solution to a real problem. Follow this journey from choosing a problem to deploying a working solution.</p>
      
      <div class="diagram-container" id="capstone-journey-container">
        <div class="diagram-header">
          <span class="diagram-title">üöÄ Your Capstone Journey</span>
        </div>
        <div id="capstone-journey-story" class="diagram-canvas storytelling"></div>
        
        <div class="diagram-story" id="capstone-journey-story-caption">
          <div class="story-step">
            <div class="story-icon visible">üöÄ</div>
            <div class="story-content">
              <div class="story-title visible">Ready to Explore</div>
              <div class="story-text visible">Click any progress dot below to jump to that step, or press Play to watch the full story unfold.</div>
              <div class="story-connection" style="display: none;">
                <span class="arrow">‚Üí</span>
                <span class="connection-text"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="playback-controls">
          <div class="playback-left">
            <button class="diagram-btn play-btn" data-action="play">‚ñ∂ Play</button>
          </div>
          <div class="playback-center">
            <div class="story-progress" id="capstone-journey-story-progress"></div>
          </div>
          <div class="playback-right">
            <button class="diagram-btn small" data-action="fit" title="Fit to view">Fit</button>
            <button class="diagram-btn small" data-action="reset" title="Reset view">Reset</button>
          </div>
        </div>

        <div class="settings-bar">
          <div class="control-group">
            <label>‚è±Ô∏è</label>
            <select id="capstone-journey-speed-select">
              <option value="1000">1s</option>
              <option value="2000" selected>2s</option>
              <option value="5000">5s</option>
              <option value="10000">10s</option>
            </select>
          </div>
          <div class="control-group">
            <button class="audio-toggle" id="capstone-journey-audio-toggle" title="Toggle audio narration">
              <span class="audio-icon">üîä</span>
            </button>
          </div>
          <div class="control-group">
            <label>üé§</label>
            <select id="capstone-journey-voice-select" class="voice-select">
              <option value="">Loading...</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Activity Carousels for Story 2: Capstone Journey -->
      <div class="activity-carousels" data-story="capstone-journey-story">
        <div id="story2-comprehension" class="carousel-container"></div>
        <div id="story2-application" class="carousel-container"></div>
        <div id="story2-synthesis" class="carousel-container"></div>
        <!-- Quiz carousel (knowledge check) after activities -->
        <div id="story2-quiz" class="carousel-container"></div>
      </div>
    </section>

    <!-- Story 3: Portfolio & Celebration -->
    <section class="section" id="portfolio-celebration-section">
      <h2>Your Complete Portfolio</h2>
      <p>Your portfolio showcases everything you've learned. Present your work with pride‚Äîyou've become a builder and problem solver.</p>
      
      <div class="diagram-container" id="portfolio-celebration-container">
        <div class="diagram-header">
          <span class="diagram-title">üéì From Student to Builder</span>
        </div>
        <div id="portfolio-celebration-story" class="diagram-canvas storytelling"></div>
        
        <div class="diagram-story" id="portfolio-celebration-story-caption">
          <div class="story-step">
            <div class="story-icon visible">üöÄ</div>
            <div class="story-content">
              <div class="story-title visible">Ready to Explore</div>
              <div class="story-text visible">Click any progress dot below to jump to that step, or press Play to watch the full story unfold.</div>
              <div class="story-connection" style="display: none;">
                <span class="arrow">‚Üí</span>
                <span class="connection-text"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="playback-controls">
          <div class="playback-left">
            <button class="diagram-btn play-btn" data-action="play">‚ñ∂ Play</button>
          </div>
          <div class="playback-center">
            <div class="story-progress" id="portfolio-celebration-story-progress"></div>
          </div>
          <div class="playback-right">
            <button class="diagram-btn small" data-action="fit" title="Fit to view">Fit</button>
            <button class="diagram-btn small" data-action="reset" title="Reset view">Reset</button>
          </div>
        </div>

        <div class="settings-bar">
          <div class="control-group">
            <label>‚è±Ô∏è</label>
            <select id="portfolio-celebration-speed-select">
              <option value="1000">1s</option>
              <option value="2000" selected>2s</option>
              <option value="5000">5s</option>
              <option value="10000">10s</option>
            </select>
          </div>
          <div class="control-group">
            <button class="audio-toggle" id="portfolio-celebration-audio-toggle" title="Toggle audio narration">
              <span class="audio-icon">üîä</span>
            </button>
          </div>
          <div class="control-group">
            <label>üé§</label>
            <select id="portfolio-celebration-voice-select" class="voice-select">
              <option value="">Loading...</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Activity Carousels for Story 3: Portfolio Celebration -->
      <div class="activity-carousels" data-story="portfolio-celebration-story">
        <div id="story3-comprehension" class="carousel-container"></div>
        <div id="story3-application" class="carousel-container"></div>
        <div id="story3-synthesis" class="carousel-container"></div>
        <!-- Quiz carousel (knowledge check) after activities -->
        <div id="story3-quiz" class="carousel-container"></div>
      </div>
    </section>

    <!-- Next Steps -->
    <section class="section">
      <h2>üéì Congratulations, Problem Solver!</h2>
      <p>You've completed the AI Problem Solving Academy! You now have skills that most adults don't have. Keep building, stay curious, help others, and level up. The world needs more builders like you.</p>
      <div class="cards-grid" style="grid-template-columns: repeat(2, 1fr);">
        <a href="../week3-building/" class="card">
          <div class="card-icon">üõ†Ô∏è</div>
          <h3>Week 3: Building</h3>
          <p>Review what you learned about building real things with AI.</p>
        </a>
        <a href="../index.html" class="card">
          <div class="card-icon">üìö</div>
          <h3>Course Overview</h3>
          <p>See all weeks in Endless Opportunities.</p>
        </a>
      </div>
    </section>
  </main>

  <nav class="page-nav">
    <h4>On This Page</h4>
    <ul>
      <li><a href="#problem-solving-process-section">Problem-Solving Process</a></li>
      <li><a href="#capstone-journey-section">Building Your Capstone</a></li>
      <li><a href="#portfolio-celebration-section">Your Complete Portfolio</a></li>
    </ul>
  </nav>

  <button class="back-to-top" title="Back to top">‚Üë</button>

  <!-- External Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.2/anime.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.28.1/cytoscape.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dagre/0.8.5/dagre.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/cytoscape-dagre@2.5.0/cytoscape-dagre.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/cytoscape-cose-bilkent@4.1.0/cytoscape-cose-bilkent.min.js"></script>
  
  <!-- Interactive Engines -->
  <script src="../../shared/js/interactive/diagram-utils.js"></script>
  <script src="../../shared/js/interactive/audio-engine.js"></script>
  <script src="../../shared/js/interactive/storytelling-diagram.js"></script>

  <!-- Activity Carousel System -->
    <!-- Firebase & Activity Tracking -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="../../shared/js/firebase-config.js"></script>
  <script src="../../shared/js/auth.js"></script>
  <script src="../../shared/js/data-service.js"></script>
  <script src="../../shared/js/activity-tracker.js"></script>

  <script src="../../shared/js/interactive/base-activity.js"></script>
  <script src="../../shared/js/interactive/activities/quiz-activity.js"></script>
  <script src="../../shared/js/interactive/activities/true-false-activity.js"></script>
  <script src="../../shared/js/interactive/activities/fill-blank-activity.js"></script>
  <script src="../../shared/js/interactive/activities/sequence-activity.js"></script>
  <script src="../../shared/js/interactive/activities/drag-drop-activity.js"></script>
  <script src="../../shared/js/interactive/activities/connect-edges-activity.js"></script>
  <script src="../../shared/js/interactive/activities/scenario-activity.js"></script>
  <script src="../../shared/js/interactive/activities/prediction-activity.js"></script>
  <script src="../../shared/js/interactive/activities/reflection-activity.js"></script>
  <script src="../../shared/js/interactive/activities/graph-builder-activity.js"></script>
  <script src="../../shared/js/interactive/activity-carousel.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      // Initialize Firebase FIRST
      if (window.FirebaseApp) {
        window.FirebaseApp.init();
        console.log('‚úÖ Firebase initialized');
      }
      
      // Initialize AuthService and wait for auth state
      if (window.AuthService) {
        window.AuthService.init();
        await window.AuthService.waitForAuthState();
        console.log('üë§ Auth ready:', window.AuthService.getUser()?.email || 'not signed in');
      }
      
      // Initialize ActivityTracker AFTER auth is ready
      const courseId = document.body.dataset.course;
      const lessonId = document.body.dataset.lesson;
      if (courseId && lessonId && window.ActivityTracker) {
        ActivityTracker.init(courseId, lessonId);
        console.log('üéØ ActivityTracker initialized:', courseId, lessonId);
      }

      // Initialize page animations
      DiagramUtils.initPageAnimations();
      DiagramUtils.setupBackToTop();

      // Load story and quiz data from JSON
      const response = await fetch('story.json');
      const pageData = await response.json();

      // Create a shared audio engine pointing to the audio folder
      const audioEngine = new AudioNarrationEngine('audio');

      // ============================================
      // DIAGRAM ELEMENTS (Cytoscape data)
      // ============================================

      const diagramElements = {
        'problem-solving-process': [
          // Nodes
          { data: { id: 'all-pieces', label: 'üéØ All the Pieces\nYou\'re Ready', type: 'concept', description: 'Everything comes together' } },
          { data: { id: 'questions-step', label: '‚ùì Questions\n6 Levels Deep', type: 'example', description: 'Understand first' } },
          { data: { id: 'data-step', label: 'üìä Data\nGather Info', type: 'data', description: 'Find patterns' } },
          { data: { id: 'insight-step', label: 'üí° Insights\nOpportunities', type: 'auth', description: 'What to build' } },
          { data: { id: 'build-step', label: 'üõ†Ô∏è Build\nCreate Solution', type: 'page', description: 'Real solutions' } },
          // Edges
          { data: { source: 'all-pieces', target: 'questions-step' } },
          { data: { source: 'questions-step', target: 'data-step' } },
          { data: { source: 'data-step', target: 'insight-step' } },
          { data: { source: 'insight-step', target: 'build-step' } }
        ],

        'capstone-journey': [
          // Nodes
          { data: { id: 'choose-problem', label: 'üéØ Choose\nYour Problem', type: 'concept', description: 'Real, specific, solvable' } },
          { data: { id: 'deep-understanding', label: 'üîç Go Deep\n6 Levels', type: 'example', description: 'Root causes' } },
          { data: { id: 'gather-data', label: 'üìä Gather\nData', type: 'data', description: 'Research & organize' } },
          { data: { id: 'build-with-ai', label: 'ü§ñ Build\nwith AI', type: 'service', description: 'Cursor + iterate' } },
          { data: { id: 'deploy-test', label: 'üöÄ Deploy\n& Test', type: 'page', description: 'Real users' } },
          // Edges
          { data: { source: 'choose-problem', target: 'deep-understanding' } },
          { data: { source: 'deep-understanding', target: 'gather-data' } },
          { data: { source: 'gather-data', target: 'build-with-ai' } },
          { data: { source: 'build-with-ai', target: 'deploy-test' } }
        ],

        'portfolio-celebration': [
          // Nodes
          { data: { id: 'portfolio-showcase', label: 'üìÅ Portfolio\nShowcase', type: 'concept', description: 'Your work' } },
          { data: { id: 'present-work', label: 'üé§ Present\nYour Work', type: 'example', description: '3-5 minutes' } },
          { data: { id: 'show-dont-tell', label: 'üëÄ Show\nDon\'t Tell', type: 'service', description: 'Demo it!' } },
          { data: { id: 'youre-a-builder', label: 'üéì You\'re a\nBuilder', type: 'auth', description: 'Problem solver' } },
          { data: { id: 'keep-going', label: 'üöÄ Keep\nGoing', type: 'page', description: 'This is just the start' } },
          // Edges
          { data: { source: 'portfolio-showcase', target: 'present-work' } },
          { data: { source: 'present-work', target: 'show-dont-tell' } },
          { data: { source: 'show-dont-tell', target: 'youre-a-builder' } },
          { data: { source: 'youre-a-builder', target: 'keep-going' } }
        ]
      };

      // ============================================
      // INITIALIZE STORYTELLING DIAGRAMS
      // ============================================

      // Map story IDs to diagram element keys
      const storyToDiagram = {
        'problem-solving-process-story': 'problem-solving-process',
        'capstone-journey-story': 'capstone-journey',
        'portfolio-celebration-story': 'portfolio-celebration'
      };

      // Create storytelling diagrams for each story in the JSON
      pageData.stories.forEach(story => {
        const diagramKey = storyToDiagram[story.id];
        if (!diagramKey) return;

        const elements = diagramElements[diagramKey];
        if (!elements) return;

        new StorytellingDiagram(
          story.id,
          elements,
          story.steps,
          { audioEngine, storyId: story.id }
        );
      });

      // ============================================
      // INITIALIZE QUIZ CAROUSELS (using ActivityCarousel)
      // ============================================

      const storyToQuizContainer = {
        'problem-solving-process-story': 'story1-quiz',
        'capstone-journey-story': 'story2-quiz',
        'portfolio-celebration-story': 'story3-quiz'
      };

      pageData.quizzes.forEach(quiz => {
        const containerId = storyToQuizContainer[quiz.storyId];
        if (!containerId) return;
        
        // Transform quiz questions to ActivityCarousel format
        const quizActivities = quiz.questions.map((q, i) => ({
          type: 'quiz',
          id: `${quiz.storyId}-quiz-${i + 1}`,
          question: q.question,
          options: q.options,
          correct: q.correct,
          explanation: q.explanation
        }));
        
        new ActivityCarousel(containerId, {
          type: 'knowledge-check',
          sectionId: quiz.storyId,
          title: 'üìù Knowledge Check',
          activities: quizActivities
        });
      });

      // ============================================
      // ACTIVITY CAROUSELS
      // ============================================

      // Story 1: Problem-Solving Process - Comprehension
      const story1Comprehension = new ActivityCarousel('story1-comprehension', {
        type: 'comprehension',
        sectionId: 'problem-solving-process',
        title: 'Check Your Understanding',
        activities: [
          {
            type: 'quiz',
            id: 'psp-quiz-framework',
            question: 'What is the correct order of the problem-solving process?',
            options: [
              'Build ‚Üí Questions ‚Üí Data ‚Üí Insights',
              'Questions ‚Üí Data ‚Üí Insights ‚Üí Build',
              'Data ‚Üí Questions ‚Üí Build ‚Üí Insights',
              'Insights ‚Üí Build ‚Üí Questions ‚Üí Data'
            ],
            correct: 1,
            explanation: 'The process flows: Questions (understand the problem) ‚Üí Data (gather information) ‚Üí Insights (find patterns and opportunities) ‚Üí Build (create the solution).',
            points: 10
          },
          {
            type: 'quiz',
            id: 'psp-quiz-first-step',
            question: 'Why do we start with questions rather than jumping to building?',
            options: [
              'Because questions are easier than building',
              'Because teachers require it',
              'Because understanding root causes prevents solving the wrong problem',
              'Because it takes less time'
            ],
            correct: 2,
            explanation: 'Starting with deep questions ensures you understand what you\'re actually solving. Jumping to solutions often means solving surface symptoms rather than root causes.',
            points: 10
          },
          {
            type: 'true-false',
            id: 'psp-tf-data-noise',
            statement: 'The lesson says "data without insight is just noise."',
            correct: true,
            explanation: 'Data alone doesn\'t tell you what to build. You need to find patterns and meaning (insights) for data to become useful.',
            requireReasoning: true,
            minReasoningWords: 5,
            points: 15
          },
          {
            type: 'true-false',
            id: 'psp-tf-iterate',
            statement: 'According to the lesson, you should build a perfect solution on the first try.',
            correct: false,
            explanation: 'The lesson emphasizes iteration: "build a first version, test it, then improve. Real solutions evolve."',
            requireReasoning: true,
            minReasoningWords: 5,
            points: 15
          },
          {
            type: 'fill-blank',
            id: 'psp-fill-levels',
            statement: 'To truly understand a problem, go ___ levels deep with your questions.',
            correctAnswers: ['six', '6', 'six levels', '6 levels'],
            caseSensitive: false,
            hints: ['Remember the framework from Week 1'],
            explanation: 'The six levels deep framework helps you move past surface understanding to root causes.',
            points: 10
          },
          {
            type: 'fill-blank',
            id: 'psp-fill-insights',
            statement: 'Patterns in your data reveal ___ about what to build.',
            correctAnswers: ['opportunities', 'insights', 'solutions', 'possibilities'],
            caseSensitive: false,
            hints: ['What do patterns show you?'],
            explanation: 'Finding patterns and gaps in data reveals opportunities for solutions.',
            points: 10
          },
          {
            type: 'quiz',
            id: 'psp-quiz-evolve',
            question: 'The lesson says "Real solutions ___":',
            options: [
              'Are perfect from the start',
              'Evolve through iteration',
              'Don\'t need testing',
              'Require years of development'
            ],
            correct: 1,
            explanation: 'Real solutions evolve. You build, test, get feedback, and improve continuously.',
            points: 10
          }
        ]
      });
      story1Comprehension.init();

      // Story 1: Problem-Solving Process - Application
      const story1Application = new ActivityCarousel('story1-application', {
        type: 'application',
        sectionId: 'problem-solving-process',
        title: 'Apply What You Learned',
        activities: [
          {
            type: 'sequence',
            id: 'psp-seq-process',
            instruction: 'Put the problem-solving process in order:',
            items: [
              { id: 'p1', text: '‚ùì Ask deep questions (6 levels)' },
              { id: 'p2', text: 'üìä Gather data and look for patterns' },
              { id: 'p3', text: 'üí° Find insights and opportunities' },
              { id: 'p4', text: 'üõ†Ô∏è Build and iterate on your solution' }
            ],
            correctOrder: ['p1', 'p2', 'p3', 'p4'],
            hints: {
              partial: 'Understanding comes before building.',
              wrong: 'Start with questions to understand the problem first.'
            },
            explanation: 'The process is linear: Questions ‚Üí Data ‚Üí Insights ‚Üí Build. Each step informs the next.',
            points: 20
          },
          {
            type: 'drag-drop',
            id: 'psp-dd-step-outcomes',
            instruction: 'Match each step to what it produces:',
            items: [
              { id: 's1', text: 'Deep questions (6 levels)' },
              { id: 's2', text: 'Data gathering' },
              { id: 's3', text: 'Pattern analysis' },
              { id: 's4', text: 'Building with AI' }
            ],
            zones: [
              { id: 'understanding', label: 'üéØ Root Cause Understanding', correct: ['s1'] },
              { id: 'information', label: 'üìã Organized Information', correct: ['s2'] },
              { id: 'insights', label: 'üí° Actionable Insights', correct: ['s3'] },
              { id: 'solution', label: 'üöÄ Working Solution', correct: ['s4'] }
            ],
            explanation: 'Each step produces a specific output that enables the next step.',
            points: 25
          },
          {
            type: 'connect-edges',
            id: 'psp-ce-week-skills',
            instruction: 'Connect each skill to the week where you learned it:',
            nodes: [
              { id: 'w1', label: '‚ùì Week 1' },
              { id: 'w2', label: 'üìä Week 2' },
              { id: 'w3', label: 'üõ†Ô∏è Week 3' },
              { id: 'questions', label: '6 Levels Deep' },
              { id: 'data', label: 'Data Mindset' },
              { id: 'build', label: 'AI Building' }
            ],
            solution: {
              edges: [
                { source: 'w1', target: 'questions' },
                { source: 'w2', target: 'data' },
                { source: 'w3', target: 'build' }
              ]
            },
            nodeDescriptions: {
              'w1': 'Art of Questions',
              'w2': 'Data is Everywhere',
              'w3': 'Building Real Things',
              'questions': 'Understanding root causes',
              'data': 'Seeing and analyzing information',
              'build': 'Creating with AI tools'
            },
            explanation: 'Your capstone combines all the skills from the entire course.',
            points: 25
          },
          {
            type: 'quiz',
            id: 'psp-quiz-apply-order',
            question: 'A friend wants to solve a problem but immediately starts coding. What\'s your advice?',
            options: [
              'Great! Building fast is always best',
              'Stop and ask: Have you gone 6 levels deep to understand the root cause first?',
              'Coding will help you figure it out',
              'Just finish it quickly'
            ],
            correct: 1,
            explanation: 'Building without understanding often solves the wrong problem. Questions first, then data, then insights, then build.',
            points: 15
          },
          {
            type: 'sequence',
            id: 'psp-seq-insight-to-build',
            instruction: 'Order these steps for going from insight to solution:',
            items: [
              { id: 'i1', text: 'Identify a gap or opportunity from your data' },
              { id: 'i2', text: 'Describe what you want AI to build' },
              { id: 'i3', text: 'Preview and test the result' },
              { id: 'i4', text: 'Iterate based on what works and doesn\'t' }
            ],
            correctOrder: ['i1', 'i2', 'i3', 'i4'],
            hints: {
              partial: 'Insight comes before building.',
              wrong: 'Start with what you learned from your data.'
            },
            explanation: 'Insights guide what to build. Then describe, preview, and iterate.',
            points: 20
          },
          {
            type: 'drag-drop',
            id: 'psp-dd-process-benefits',
            instruction: 'Match each process step to its key benefit:',
            items: [
              { id: 'b1', text: 'Prevents solving the wrong problem' },
              { id: 'b2', text: 'Reveals patterns others miss' },
              { id: 'b3', text: 'Shows what to build and why' },
              { id: 'b4', text: 'Creates something real and usable' }
            ],
            zones: [
              { id: 'questions', label: '‚ùì Questions Step', correct: ['b1'] },
              { id: 'data', label: 'üìä Data Step', correct: ['b2'] },
              { id: 'insights', label: 'üí° Insights Step', correct: ['b3'] },
              { id: 'build', label: 'üõ†Ô∏è Build Step', correct: ['b4'] }
            ],
            explanation: 'Each step has a specific purpose in creating effective solutions.',
            points: 20
          }
        ]
      });
      story1Application.init();

      // Story 1: Problem-Solving Process - Synthesis
      const story1Synthesis = new ActivityCarousel('story1-synthesis', {
        type: 'synthesis',
        sectionId: 'problem-solving-process',
        title: 'Think Deeper',
        activities: [
          {
            type: 'scenario',
            id: 'psp-scenario-skip-steps',
            scenario: 'A classmate says: "I have a great idea, so I\'m just going to start building. Questions and data take too long."',
            question: 'Using what you\'ve learned, explain what risks they\'re taking and what they might miss.',
            evaluation: {
              keywords: ['root', 'cause', 'wrong problem', 'surface', 'understand', 'data', 'patterns', 'insights', 'iterate', 'assumptions'],
              minWords: 40,
              pointsPerKeyword: 3,
              depthBonus: 12
            },
            modelAnswer: 'Risks: They might solve the wrong problem entirely (surface vs root cause). They\'ll miss data that could reveal better approaches. Without insights, they\'re building on assumptions, not evidence. They might spend weeks building something nobody actually needs. The process exists to prevent expensive mistakes.',
            points: 25
          },
          {
            type: 'prediction',
            id: 'psp-predict-two-approaches',
            setup: {
              type: 'text',
              content: 'Person A follows the full process: Questions ‚Üí Data ‚Üí Insights ‚Üí Build. Person B has the same idea but skips straight to building.'
            },
            question: 'Whose solution will be more effective? Why?',
            correctAnswer: 'Person A',
            acceptableVariants: ['A', 'first person', 'process follower', 'the one who asked questions'],
            explanation: 'Person A will likely build something that addresses the real problem because they understood root causes, gathered evidence, and found insights. Person B might build something impressive that solves the wrong problem or misses key user needs.',
            commonMistakes: {
              'B': 'Speed without understanding often means building the wrong thing faster.',
              'both': 'Very different outcomes. Understanding compounds into better solutions.'
            },
            points: 15
          },
          {
            type: 'reflection',
            id: 'psp-reflect-your-process',
            prompt: 'Think about a time you tried to solve a problem without fully understanding it first. What happened? How might following the Questions ‚Üí Data ‚Üí Insights ‚Üí Build process have changed the outcome?',
            thinkingPrompts: [
              'What problem did you try to solve?',
              'What assumptions did you make?',
              'What would deeper questions have revealed?',
              'How might data have changed your approach?'
            ],
            evaluation: {
              minWords: 50,
              depthIndicators: [
                { pattern: 'I (tried|thought|assumed|jumped)', label: 'Personal experience', points: 5 },
                { pattern: '(should have|could have|would have)', label: 'Alternative approach', points: 5 },
                { pattern: '(question|ask|understand|root)', label: 'Process awareness', points: 4 },
                { pattern: '(data|information|evidence)', label: 'Data awareness', points: 4 },
                { pattern: '(next time|now I|learned)', label: 'Learning insight', points: 3 }
              ],
              maxScore: 21
            },
            points: 20
          },
          {
            type: 'scenario',
            id: 'psp-scenario-contradict',
            scenario: 'You\'ve gathered data about a problem and found two contradictory patterns: some users love feature X, others hate it.',
            question: 'How should you interpret this contradiction? What does it reveal about the problem?',
            evaluation: {
              keywords: ['different', 'users', 'groups', 'needs', 'contexts', 'segments', 'both', 'valid', 'complexity', 'opportunity'],
              minWords: 40,
              pointsPerKeyword: 3,
              depthBonus: 12
            },
            modelAnswer: 'The contradiction reveals complexity: different user groups have different needs. This isn\'t a problem to eliminate - it\'s an insight. There might be two distinct user segments, or context matters (feature X is good in some situations, bad in others). The opportunity might be: make feature X optional, or build different versions for different users.',
            points: 25
          },
          {
            type: 'prediction',
            id: 'psp-predict-iteration',
            setup: {
              type: 'text',
              content: 'You build your first version and it doesn\'t work as expected. Your insights seem to be partially wrong.'
            },
            question: 'Is this failure or normal? What should you do?',
            correctAnswer: 'normal',
            acceptableVariants: ['iterate', 'expected', 'part of the process', 'learn', 'refine'],
            explanation: 'This is normal and expected. Building tests your understanding and reveals assumptions you didn\'t know you had. The correct response: iterate. Use what you learned to refine your insights, then build again. The process is circular, not linear.',
            commonMistakes: {
              'failure': 'Discovering gaps in your understanding through building is the process working correctly.',
              'start over': 'You don\'t need to start over - refine and iterate.'
            },
            points: 15
          },
          {
            type: 'graph-builder',
            id: 'psp-graph-process',
            instruction: 'Build a diagram showing the problem-solving process for YOUR capstone idea: What questions would you ask? What data would you gather? What insights might emerge? What would you build?',
            nodeTypes: [
              { type: 'question', label: '‚ùì Question', color: '#ef5350' },
              { type: 'data', label: 'üìä Data', color: '#42a5f5' },
              { type: 'insight', label: 'üí° Insight', color: '#ffd54f' },
              { type: 'build', label: 'üõ†Ô∏è Build', color: '#66bb6a' }
            ],
            validation: {
              requiredNodes: ['question', 'data', 'insight', 'build'],
              requiredEdges: [
                { from: 'question', to: 'data' }
              ],
              optionalNodes: [],
              minNodes: 4,
              maxNodes: 8
            },
            hints: [
              'Start with a deep question about your problem',
              'What data would help you understand it?',
              'What insight might that data reveal?',
              'What would you build based on that insight?'
            ],
            points: 30
          }
        ]
      });
      story1Synthesis.init();

      // Story 2: Capstone Journey - Comprehension
      const story2Comprehension = new ActivityCarousel('story2-comprehension', {
        type: 'comprehension',
        sectionId: 'capstone-journey',
        title: 'Check Your Understanding',
        activities: [
          {
            type: 'quiz',
            id: 'cj-quiz-problem-criteria',
            question: 'What makes a good capstone problem? It should be:',
            options: [
              'As complex as possible to impress people',
              'Real (observed), specific (not too broad), and solvable (addressable)',
              'Something you read about online',
              'Whatever is easiest to build'
            ],
            correct: 1,
            explanation: 'Good problems are real (you\'ve seen them), specific (focused), and solvable (you can actually build something to address them).',
            points: 10
          },
          {
            type: 'quiz',
            id: 'cj-quiz-deep-why',
            question: 'Why does the lesson recommend going 6 levels deep before building?',
            options: [
              'To fill time before the building phase',
              'To truly understand root causes so you build a better solution',
              'Because it\'s required for the grade',
              'To avoid building anything'
            ],
            correct: 1,
            explanation: 'Six levels deep helps you understand root causes, not just symptoms. This leads to solutions that address the real problem.',
            points: 10
          },
          {
            type: 'true-false',
            id: 'cj-tf-live',
            statement: 'You should put your solution on GitHub Pages so it\'s live on the internet.',
            correct: true,
            explanation: 'The lesson says to "Put your solution on GitHub Pages so it\'s live on the internet." Real solutions need to be shareable and testable.',
            requireReasoning: true,
            minReasoningWords: 5,
            points: 15
          },
          {
            type: 'true-false',
            id: 'cj-tf-users',
            statement: 'You should wait until your solution is perfect before sharing it with any users.',
            correct: false,
            explanation: 'The lesson says to "Share it with two or three people who might use it. Get their feedback, then make improvements." Real feedback improves real solutions.',
            requireReasoning: true,
            minReasoningWords: 5,
            points: 15
          },
          {
            type: 'fill-blank',
            id: 'cj-fill-chatgpt',
            statement: 'Use ___ to go six levels deep on your problem.',
            correctAnswers: ['ChatGPT', 'AI', 'Claude', 'an AI'],
            caseSensitive: false,
            hints: ['What tool helps you explore questions?'],
            explanation: 'AI tools like ChatGPT help you explore each level of "why" systematically.',
            points: 10
          },
          {
            type: 'fill-blank',
            id: 'cj-fill-cursor',
            statement: 'Use ___ to build your solution with AI assistance.',
            correctAnswers: ['Cursor', 'AI', 'Cursor AI'],
            caseSensitive: false,
            hints: ['What AI coding tool did you learn in Week 3?'],
            explanation: 'Cursor is the AI-powered IDE that helps you build solutions by describing what you want.',
            points: 10
          },
          {
            type: 'quiz',
            id: 'cj-quiz-feedback',
            question: 'After deploying, you should:',
            options: [
              'Consider the project complete',
              'Share with users, get feedback, and make improvements',
              'Delete it and start over',
              'Hide it until it\'s perfect'
            ],
            correct: 1,
            explanation: '"Share it with two or three people who might use it. Get their feedback, then make improvements." Iteration continues after deployment.',
            points: 10
          }
        ]
      });
      story2Comprehension.init();

      // Story 2: Capstone Journey - Application
      const story2Application = new ActivityCarousel('story2-application', {
        type: 'application',
        sectionId: 'capstone-journey',
        title: 'Apply What You Learned',
        activities: [
          {
            type: 'sequence',
            id: 'cj-seq-journey',
            instruction: 'Put the capstone journey steps in order:',
            items: [
              { id: 'j1', text: 'üéØ Choose your problem (real, specific, solvable)' },
              { id: 'j2', text: 'üîç Go 6 levels deep to understand root causes' },
              { id: 'j3', text: 'üìä Gather data about what exists and what\'s needed' },
              { id: 'j4', text: 'ü§ñ Build with AI (Cursor) and iterate' },
              { id: 'j5', text: 'üöÄ Deploy, test with users, and improve' }
            ],
            correctOrder: ['j1', 'j2', 'j3', 'j4', 'j5'],
            hints: {
              partial: 'Understanding comes before building.',
              wrong: 'Start with choosing your problem.'
            },
            explanation: 'The journey flows: Choose ‚Üí Understand ‚Üí Research ‚Üí Build ‚Üí Deploy.',
            points: 25
          },
          {
            type: 'drag-drop',
            id: 'cj-dd-problem-quality',
            instruction: 'Sort these problem statements by quality:',
            items: [
              { id: 'p1', text: '"Fix the world\'s problems"' },
              { id: 'p2', text: '"Create a local restaurant finder for families with food allergies"' },
              { id: 'p3', text: '"Make something cool"' },
              { id: 'p4', text: '"Build a study timer that tracks breaks and focus sessions"' }
            ],
            zones: [
              { id: 'good', label: '‚úÖ Good Problems (Real, Specific, Solvable)', correct: ['p2', 'p4'] },
              { id: 'bad', label: '‚ùå Bad Problems (Vague or Too Broad)', correct: ['p1', 'p3'] }
            ],
            explanation: 'Good problems are specific enough to solve and real enough that someone has the need.',
            points: 25
          },
          {
            type: 'connect-edges',
            id: 'cj-ce-data-types',
            instruction: 'Connect each data-gathering question to what it reveals:',
            nodes: [
              { id: 'q1', label: '"What solutions exist?"' },
              { id: 'q2', label: '"What do people say about this?"' },
              { id: 'q3', label: '"What specific data would help?"' },
              { id: 'gap', label: 'üï≥Ô∏è Gaps in Current Solutions' },
              { id: 'needs', label: 'üí¨ Real User Needs' },
              { id: 'features', label: 'üìã Required Features' }
            ],
            solution: {
              edges: [
                { source: 'q1', target: 'gap' },
                { source: 'q2', target: 'needs' },
                { source: 'q3', target: 'features' }
              ]
            },
            nodeDescriptions: {
              'q1': 'Research existing tools',
              'q2': 'Listen to real people',
              'q3': 'Identify specifics',
              'gap': 'What\'s missing?',
              'needs': 'What do people want?',
              'features': 'What should you build?'
            },
            explanation: 'Different questions reveal different aspects of the problem space.',
            points: 25
          },
          {
            type: 'quiz',
            id: 'cj-quiz-existing',
            question: 'You find that a solution similar to yours already exists. What should you do?',
            options: [
              'Abandon your project entirely',
              'Copy their solution exactly',
              'Study their gaps and what your unique insight adds',
              'Ignore it and pretend it doesn\'t exist'
            ],
            correct: 2,
            explanation: 'Existing solutions validate the problem space. Study what they do well, find their gaps, and add your unique perspective.',
            points: 15
          },
          {
            type: 'sequence',
            id: 'cj-seq-build-iterate',
            instruction: 'Order the build-and-iterate steps:',
            items: [
              { id: 'b1', text: 'Describe what you want to AI' },
              { id: 'b2', text: 'Preview the result' },
              { id: 'b3', text: 'Identify what works and doesn\'t' },
              { id: 'b4', text: 'Ask for specific changes' },
              { id: 'b5', text: 'Deploy when it\'s working well' }
            ],
            correctOrder: ['b1', 'b2', 'b3', 'b4', 'b5'],
            hints: {
              partial: 'Start with describing to AI.',
              wrong: 'You need to create something before you can evaluate it.'
            },
            explanation: 'The building loop: Describe ‚Üí Preview ‚Üí Evaluate ‚Üí Refine ‚Üí Deploy.',
            points: 20
          },
          {
            type: 'drag-drop',
            id: 'cj-dd-feedback-use',
            instruction: 'Sort these feedback responses into helpful vs unhelpful:',
            items: [
              { id: 'f1', text: 'Get defensive about your work' },
              { id: 'f2', text: 'Listen for patterns across multiple users' },
              { id: 'f3', text: 'Ignore all criticism' },
              { id: 'f4', text: 'Make improvements based on common themes' },
              { id: 'f5', text: 'Ask follow-up questions to understand the feedback' }
            ],
            zones: [
              { id: 'helpful', label: '‚úÖ Helpful Responses', correct: ['f2', 'f4', 'f5'] },
              { id: 'unhelpful', label: '‚ùå Unhelpful Responses', correct: ['f1', 'f3'] }
            ],
            explanation: 'Feedback is data. Listen, understand, find patterns, and improve.',
            points: 20
          }
        ]
      });
      story2Application.init();

      // Story 2: Capstone Journey - Synthesis
      const story2Synthesis = new ActivityCarousel('story2-synthesis', {
        sectionId: 'capstone-journey',
        title: 'Think Deeper',
        activities: [
          {
            type: 'scenario',
            id: 'cj-scenario-reframe',
            scenario: 'At level 4 of your 6 levels deep exploration, you realize the problem you chose isn\'t actually what you thought it was. The real problem is different.',
            question: 'Is this a problem or a breakthrough? What should you do?',
            evaluation: {
              keywords: ['breakthrough', 'insight', 'adjust', 'reframe', 'deeper', 'understanding', 'better', 'solution', 'growth', 'valuable'],
              minWords: 40,
              pointsPerKeyword: 3,
              depthBonus: 12
            },
            modelAnswer: 'This is a breakthrough, not a problem. It means your questioning is working. You\'ve discovered something most people miss. Adjust your problem statement based on this deeper understanding. This will lead to a more effective solution because you\'re now solving the actual root cause, not surface symptoms.',
            points: 25
          },
          {
            type: 'prediction',
            id: 'cj-predict-impressive-vs-real',
            setup: {
              type: 'text',
              content: 'Student A chooses an impressive-sounding problem they read about but haven\'t experienced. Student B chooses a simpler problem they\'ve actually observed in their daily life.'
            },
            question: 'Who will likely build a better solution? Why?',
            correctAnswer: 'Student B',
            acceptableVariants: ['B', 'second student', 'real problem', 'observed problem'],
            explanation: 'Student B has tacit knowledge from lived experience - they understand context, emotions, and real constraints. Student A builds on shallow understanding from reading. Real observation provides advantages that research alone cannot.',
            commonMistakes: {
              'A': 'Impressive-sounding problems without real understanding often lead to solutions nobody actually needs.',
              'both': 'Very different starting points lead to different outcomes.'
            },
            points: 15
          },
          {
            type: 'reflection',
            id: 'cj-reflect-problem-choice',
            prompt: 'Think about your capstone problem. Is it real (you\'ve observed it), specific (focused enough to solve), and solvable (you can build something)? If not, how might you adjust it?',
            thinkingPrompts: [
              'Have you actually seen this problem in real life?',
              'Is it specific enough to build a single solution?',
              'Can you actually create something to address it?',
              'What would make it more real, specific, or solvable?'
            ],
            evaluation: {
              minWords: 50,
              depthIndicators: [
                { pattern: '(observed|seen|noticed|experienced)', label: 'Real problem check', points: 5 },
                { pattern: '(specific|focused|narrow|clear)', label: 'Specificity check', points: 5 },
                { pattern: '(build|create|make|solve)', label: 'Solvability check', points: 4 },
                { pattern: '(adjust|change|refine|improve)', label: 'Willingness to iterate', points: 4 },
                { pattern: '(because|since|due to)', label: 'Reasoning depth', points: 3 }
              ],
              maxScore: 21
            },
            points: 25
          },
          {
            type: 'scenario',
            id: 'cj-scenario-user-struggle',
            scenario: 'Your first user struggles with something you found obvious. They can\'t figure out how to use a feature you thought was simple.',
            question: 'What does this reveal? How should you respond?',
            evaluation: {
              keywords: ['knowledge', 'gap', 'expertise', 'blind spot', 'beginner', 'user', 'perspective', 'simplify', 'improve', 'humble'],
              minWords: 40,
              pointsPerKeyword: 3,
              depthBonus: 12
            },
            modelAnswer: 'This reveals the "curse of knowledge" - your deep immersion in the problem has made you blind to the beginner\'s experience. What\'s obvious to you required all your research to become obvious. Response: Thank the user, simplify the feature, add guidance, and remember to design for people who don\'t share your understanding.',
            points: 25
          },
          {
            type: 'prediction',
            id: 'cj-predict-ego-work',
            setup: {
              type: 'text',
              content: 'Person A takes feedback personally and gets defensive. Person B sees feedback as data and gets curious about what they can learn.'
            },
            question: 'Over multiple projects, who will grow faster as a builder? Why?',
            correctAnswer: 'Person B',
            acceptableVariants: ['B', 'curious one', 'second person', 'data person'],
            explanation: 'Person B treats every piece of feedback as fuel for improvement. Person A\'s defensiveness blocks learning. The ability to separate ego from work is a meta-skill that enables continuous growth. Person B will compound their learning over time.',
            commonMistakes: {
              'A': 'Defensiveness feels protective but actually blocks the feedback needed to improve.',
              'both': 'The growth curves diverge dramatically over time.'
            },
            points: 15
          },
          {
            type: 'graph-builder',
            id: 'cj-graph-capstone',
            instruction: 'Build a diagram of YOUR capstone project: What problem are you solving? What did you discover at 6 levels deep? What data did you gather? What are you building?',
            nodeTypes: [
              { type: 'problem', label: 'üéØ Problem', color: '#ef5350' },
              { type: 'root', label: 'üå± Root Cause', color: '#ff7043' },
              { type: 'data', label: 'üìä Data Found', color: '#42a5f5' },
              { type: 'insight', label: 'üí° Insight', color: '#ffd54f' },
              { type: 'solution', label: 'üõ†Ô∏è Solution', color: '#66bb6a' }
            ],
            validation: {
              requiredNodes: ['problem', 'solution'],
              requiredEdges: [],
              optionalNodes: ['root', 'data', 'insight'],
              minNodes: 2,
              maxNodes: 7
            },
            hints: [
              'Start with your specific problem',
              'What root cause did 6 levels reveal?',
              'What key data or insight guided your solution?',
              'What are you building to address it?'
            ],
            points: 30
          }
        ]
      });
      story2Synthesis.init();

      // Story 3: Portfolio Celebration - Comprehension
      const story3Comprehension = new ActivityCarousel('story3-comprehension', {
        type: 'comprehension',
        sectionId: 'portfolio-celebration',
        title: 'Check Your Understanding',
        activities: [
          {
            type: 'quiz',
            id: 'pc-quiz-portfolio',
            question: 'What does your portfolio showcase?',
            options: [
              'Only your capstone project',
              'Work from each week plus your capstone',
              'Only what you\'re proud of',
              'Just code without context'
            ],
            correct: 1,
            explanation: 'Your portfolio includes "work from each week plus your capstone project" - it shows your complete learning journey.',
            points: 10
          },
          {
            type: 'quiz',
            id: 'pc-quiz-present-time',
            question: 'How long should your capstone presentation be?',
            options: [
              'As long as needed',
              '3-5 minutes',
              '30 minutes',
              '1 minute'
            ],
            correct: 1,
            explanation: '"Keep it short‚Äîthree to five minutes." Concise presentations that demo real work are more impactful than long explanations.',
            points: 10
          },
          {
            type: 'true-false',
            id: 'pc-tf-show',
            statement: 'The lesson advises "show, don\'t tell" when presenting your work.',
            correct: true,
            explanation: '"Demo your actual project. Let them see it work." Showing your project working is more powerful than just describing it.',
            requireReasoning: true,
            minReasoningWords: 5,
            points: 15
          },
          {
            type: 'true-false',
            id: 'pc-tf-builder',
            statement: 'After completing this course, you\'re still just a consumer of technology.',
            correct: false,
            explanation: '"You\'re not just a consumer of technology anymore. You\'re a builder. You\'re a problem solver."',
            requireReasoning: true,
            minReasoningWords: 5,
            points: 15
          },
          {
            type: 'fill-blank',
            id: 'pc-fill-proof',
            statement: 'Your portfolio is ___ that you can solve real problems.',
            correctAnswers: ['proof', 'evidence', 'demonstration'],
            caseSensitive: false,
            hints: ['What does your portfolio demonstrate?'],
            explanation: 'Your portfolio is proof of capability - concrete evidence that you can solve real problems.',
            points: 10
          },
          {
            type: 'fill-blank',
            id: 'pc-fill-beginning',
            statement: 'The course says "This is just the ___" - your journey continues.',
            correctAnswers: ['beginning', 'start'],
            caseSensitive: false,
            hints: ['What phase are you at?'],
            explanation: 'Completing the course is just the beginning. Keep building, stay curious, help others.',
            points: 10
          },
          {
            type: 'quiz',
            id: 'pc-quiz-identity',
            question: 'What identity shift does the course aim to create?',
            options: [
              'From student to teacher',
              'From consumer to builder/problem solver',
              'From beginner to expert',
              'From learner to leader'
            ],
            correct: 1,
            explanation: 'The fundamental shift is from consuming technology to building it - from waiting for solutions to creating them.',
            points: 10
          }
        ]
      });
      story3Comprehension.init();

      // Story 3: Portfolio Celebration - Application
      const story3Application = new ActivityCarousel('story3-application', {
        type: 'application',
        sectionId: 'portfolio-celebration',
        title: 'Apply What You Learned',
        activities: [
          {
            type: 'sequence',
            id: 'pc-seq-present',
            instruction: 'Put the presentation components in order:',
            items: [
              { id: 'pr1', text: 'Introduce the problem you solved' },
              { id: 'pr2', text: 'Explain your research (data gathered)' },
              { id: 'pr3', text: 'Demo your actual solution' },
              { id: 'pr4', text: 'Share what you learned' }
            ],
            correctOrder: ['pr1', 'pr2', 'pr3', 'pr4'],
            hints: {
              partial: 'Start with the problem.',
              wrong: 'Context before demo - they need to understand what problem you solved.'
            },
            explanation: 'Presentation flow: Problem ‚Üí Research ‚Üí Demo ‚Üí Learnings.',
            points: 20
          },
          {
            type: 'drag-drop',
            id: 'pc-dd-show-vs-tell',
            instruction: 'Sort these presentation approaches:',
            items: [
              { id: 'a1', text: 'Click through your live project' },
              { id: 'a2', text: 'Read from slides describing what you built' },
              { id: 'a3', text: 'Let them see a feature working' },
              { id: 'a4', text: 'Talk about what you would have built if you had time' },
              { id: 'a5', text: 'Show a user interacting with your solution' }
            ],
            zones: [
              { id: 'show', label: 'üëÄ Show', correct: ['a1', 'a3', 'a5'] },
              { id: 'tell', label: 'üí¨ Tell', correct: ['a2', 'a4'] }
            ],
            explanation: 'Showing working functionality is more powerful than describing intentions.',
            points: 25
          },
          {
            type: 'connect-edges',
            id: 'pc-ce-portfolio-value',
            instruction: 'Connect what your portfolio demonstrates to who cares:',
            nodes: [
              { id: 'process', label: 'üìã Problem-Solving Process' },
              { id: 'building', label: 'üõ†Ô∏è Building Capability' },
              { id: 'range', label: 'üé® Range Across Domains' },
              { id: 'employers', label: 'üíº Employers' },
              { id: 'collaborators', label: 'ü§ù Collaborators' },
              { id: 'yourself', label: 'üéØ Yourself' }
            ],
            solution: {
              edges: [
                { source: 'process', target: 'employers' },
                { source: 'building', target: 'collaborators' },
                { source: 'range', target: 'yourself' }
              ]
            },
            nodeDescriptions: {
              'process': 'Questions ‚Üí Data ‚Üí Insights ‚Üí Build',
              'building': 'You can create real things',
              'range': 'You can apply skills anywhere',
              'employers': 'Want reliable problem-solvers',
              'collaborators': 'Want capable teammates',
              'yourself': 'Proof of what you can do'
            },
            explanation: 'Your portfolio proves different things to different audiences.',
            points: 25
          },
          {
            type: 'quiz',
            id: 'pc-quiz-dont-know',
            question: 'Someone asks a question about your project that you don\'t know the answer to. What\'s the best response?',
            options: [
              'Make something up so you don\'t look unprepared',
              'Get defensive and say the question isn\'t fair',
              'Say "I don\'t know, but here\'s how I\'d investigate it"',
              'Ignore the question and move on'
            ],
            correct: 2,
            explanation: 'Honesty about gaps shows intellectual integrity. Not-knowing is a starting point for inquiry, not a failure.',
            points: 15
          },
          {
            type: 'sequence',
            id: 'pc-seq-after-course',
            instruction: 'Order the advice for after the course:',
            items: [
              { id: 'k1', text: 'Keep building' },
              { id: 'k2', text: 'Stay curious' },
              { id: 'k3', text: 'Help others' },
              { id: 'k4', text: 'Level up' }
            ],
            correctOrder: ['k1', 'k2', 'k3', 'k4'],
            hints: {
              partial: 'Building comes first.',
              wrong: 'Practice before teaching.'
            },
            explanation: 'The path forward: Build ‚Üí Stay curious ‚Üí Help others ‚Üí Continue growing.',
            points: 20
          },
          {
            type: 'drag-drop',
            id: 'pc-dd-mindset-actions',
            instruction: 'Sort these into "Builder Mindset" vs "Consumer Mindset":',
            items: [
              { id: 'm1', text: 'See a problem and think "I could build something"' },
              { id: 'm2', text: 'Wait for someone else to solve things' },
              { id: 'm3', text: 'Think "I wish this existed" and then create it' },
              { id: 'm4', text: 'Scroll past problems without noticing' },
              { id: 'm5', text: 'View frustrations as potential projects' }
            ],
            zones: [
              { id: 'builder', label: 'üõ†Ô∏è Builder Mindset', correct: ['m1', 'm3', 'm5'] },
              { id: 'consumer', label: 'üì± Consumer Mindset', correct: ['m2', 'm4'] }
            ],
            explanation: 'Builders see opportunities where consumers see frustrations.',
            points: 20
          }
        ]
      });
      story3Application.init();

      // Story 3: Portfolio Celebration - Synthesis
      const story3Synthesis = new ActivityCarousel('story3-synthesis', {
        type: 'synthesis',
        sectionId: 'portfolio-celebration',
        title: 'Think Deeper',
        activities: [
          {
            type: 'scenario',
            id: 'pc-scenario-apologize',
            scenario: 'During your presentation, you feel the urge to apologize for what\'s "not done yet" or explain why it\'s not perfect.',
            question: 'What\'s driving this urge? What does resisting it teach you?',
            evaluation: {
              keywords: ['fear', 'enough', 'perfect', 'done', 'confidence', 'own', 'work', 'value', 'trust', 'builder'],
              minWords: 40,
              pointsPerKeyword: 3,
              depthBonus: 12
            },
            modelAnswer: 'The urge comes from fear that your work won\'t be seen as enough. But resisting it teaches you to let your work speak for itself. "Done" is better than "perfect." You built something real - that\'s more than most people ever do. Owning your work without apology is the psychological shift from student to builder.',
            points: 25
          },
          {
            type: 'prediction',
            id: 'pc-predict-single-vs-collection',
            setup: {
              type: 'text',
              content: 'Person A shows one impressive project. Person B shows a collection of projects applying the same process across different problem spaces.'
            },
            question: 'Whose portfolio is more convincing? Why?',
            correctAnswer: 'Person B',
            acceptableVariants: ['B', 'collection', 'second person', 'multiple projects'],
            explanation: 'Person A might have gotten lucky with one topic. Person B demonstrates a transferable process - reliable capability across domains. The collection proves that their skill isn\'t luck; it\'s a reproducible approach. That\'s what employers and collaborators really want.',
            commonMistakes: {
              'A': 'One project could be passion or luck. A collection proves systematic capability.',
              'both': 'Range across domains is more valuable than depth in one area.'
            },
            points: 15
          },
          {
            type: 'reflection',
            id: 'pc-reflect-identity',
            prompt: 'How has your relationship with technology and problems changed since starting this course? Do you feel more like a builder now? What does that mean for your future?',
            thinkingPrompts: [
              'How did you see problems before vs now?',
              'Do you feel capable of building solutions?',
              'What might you create in the next year?',
              'How will you keep growing as a builder?'
            ],
            evaluation: {
              minWords: 60,
              depthIndicators: [
                { pattern: '(before|used to|previously)', label: 'Past perspective', points: 5 },
                { pattern: '(now|can|able|capable)', label: 'Current confidence', points: 5 },
                { pattern: '(build|create|solve|make)', label: 'Builder identity', points: 5 },
                { pattern: '(future|will|going to|plan)', label: 'Forward thinking', points: 4 },
                { pattern: '(grow|learn|continue|keep)', label: 'Growth mindset', points: 3 }
              ],
              maxScore: 22
            },
            points: 25
          },
          {
            type: 'scenario',
            id: 'pc-scenario-permission',
            scenario: 'A friend says "I\'d love to build things but I\'m not technical enough yet. I need to learn more first before I can start."',
            question: 'Based on what you\'ve learned, how would you respond?',
            evaluation: {
              keywords: ['start', 'now', 'don\'t need', 'learn by', 'doing', 'AI', 'questions', 'describe', 'iterate', 'permission'],
              minWords: 40,
              pointsPerKeyword: 3,
              depthBonus: 12
            },
            modelAnswer: 'You don\'t need permission or more preparation - you can start now. I learned to build with AI without coding experience. The real skill is asking good questions and describing what you want. You learn by doing, not by waiting until you\'re "ready." Start with a small problem you\'ve observed and build something. Perfect timing doesn\'t exist.',
            points: 25
          },
          {
            type: 'prediction',
            id: 'pc-predict-one-year',
            setup: {
              type: 'text',
              content: 'You keep building things for the next year - one small project per month, applying the Questions ‚Üí Data ‚Üí Insights ‚Üí Build process each time.'
            },
            question: 'How will you be different after 12 projects? What will you be able to do?',
            correctAnswer: 'confident',
            acceptableVariants: ['skilled', 'experienced', 'capable', 'better', 'faster', 'portfolio', 'proven'],
            explanation: 'After 12 projects, you\'ll have: refined process skills, a substantial portfolio, confidence from repeated success, the ability to tackle larger problems, and proof of consistent capability. You\'ll see problems as opportunities, not obstacles. Building will feel natural.',
            commonMistakes: {
              'same': '12 projects fundamentally changes capability and confidence.',
              'expert': 'Not expert - but confident and capable with a proven track record.'
            },
            points: 15
          },
          {
            type: 'graph-builder',
            id: 'pc-graph-future',
            instruction: 'Build a diagram of YOUR future as a builder: What problems might you tackle? What skills will you develop? What impact could you have?',
            nodeTypes: [
              { type: 'you', label: 'üë§ You (Now)', color: '#42a5f5' },
              { type: 'project', label: 'üõ†Ô∏è Future Project', color: '#66bb6a' },
              { type: 'skill', label: 'üìö Skill to Develop', color: '#ffd54f' },
              { type: 'impact', label: 'üåü Impact', color: '#ab47bc' },
              { type: 'future', label: 'üöÄ Future You', color: '#ef5350' }
            ],
            validation: {
              requiredNodes: ['you', 'future'],
              requiredEdges: [],
              optionalNodes: ['project', 'skill', 'impact'],
              minNodes: 2,
              maxNodes: 8
            },
            hints: [
              'Start with where you are now',
              'What problems interest you for future projects?',
              'What skills would help you build more?',
              'What impact do you want to have?'
            ],
            points: 30
          }
        ]
      });
      story3Synthesis.init();

      console.log('üèÜ Week 4 activity carousels initialized!');
    });
  </script>
</body>
</html>
